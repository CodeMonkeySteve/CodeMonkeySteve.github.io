<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
  <title>Finagle</title>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <link href="/stylesheets/master.css" media="screen" rel="stylesheet" type="text/css" />
  <link href="/stylesheets/color.css" media="screen" rel="stylesheet" type="text/css" />

  <script src="/javascripts/prototype.js" type="text/javascript"></script>
  <script src="/javascripts/effects.js" type="text/javascript"></script>
  <script src="/javascripts/typo.js" type="text/javascript"></script>
  <script src="/javascripts/lucid.js" type="text/javascript"></script>

  <link href="/feed/atom.xml" rel="alternate" type="application/atom+xml" />
</head>
<body class="c-ms cs0 fixed">
  <div id="wrapper">
    <div id="w2">
      <div class="clearfix" id="w3">
        <div class="clearfix" id="header">
          <div id="logo">
            <!-- <a href="/"><img src="/images/logo.png" alt="" /></a> -->
            <h1 class="pageTitle">
              <a href="/">Finagle</a>
              <!-- <span class='subtitle'>&mdash; a weblog</span> -->
            </h1>
            <h2>Changing the world would be easier if I had the source code.</h2>
          </div>
          <div id="search"></div>
        </div>
        <div id="content">
  <div id="maincol">
    <div id="mc2">

      <div class="post">
        <div class="post-title"><h1>Ruby Gets Possessive</h1></div>
        <p class="auth">Posted by code_monkey_steve,
          <span class="typo_date" title="2010/05/07">2010-05-07 00:00:00 -0700</span></p>
        <div class="post-body">
        <p>I debated whether this code snippet was significant enough to bother blogging about, but it is useful if for no other reason that as an example of one of the great features of Ruby: the ability to reopen any class, even a standard class, and add methods.</p>
<p>In this case, we needed a method to apply the English rules for the possessive apostrophy to a string, e.g. a person&#8217;s name.  I looked-up the rules on <a href="http://en.wikipedia.org/wiki/Apostrophe#Singular_nouns_ending_with_an_.E2.80.9Cs.E2.80.9D_or_.E2.80.9Cz.E2.80.9D_sound">Wikipedia</a> and coded up the following three-liner:</p>
<div class="highlight"><pre><code class="ruby"><span class="k">class</span> <span class="nc">String</span>
  <span class="k">def</span> <span class="nf">possessive</span>
    <span class="n">str</span> <span class="o">=</span> <span class="nb">self</span> <span class="o">+</span> <span class="s2">&quot;&#39;&quot;</span>
    <span class="n">str</span> <span class="o">+=</span> <span class="s1">&#39;s&#39;</span> <span class="k">unless</span> <span class="sr">%r{(s|se|z|ze|ce|x|xe)$}i</span><span class="o">.</span><span class="n">match</span><span class="p">(</span><span class="nb">self</span><span class="p">)</span>
    <span class="n">str</span>
  <span class="k">end</span>
<span class="k">end</span>
</code></pre>
</div><p>Now in my site I can do things like:</p>
<div class="highlight"><pre><code class="ruby"><span class="s2">&quot;Steve&quot;</span><span class="o">.</span><span class="n">possessive</span> <span class="o">+</span> <span class="s2">&quot; Profile&quot;</span>  <span class="o">==</span>  <span class="s2">&quot;Steve&#39;s Profile&quot;</span>
<span class="s2">&quot;Alex&quot;</span><span class="o">.</span><span class="n">possessive</span> <span class="o">+</span> <span class="s2">&quot; Profile&quot;</span>  <span class="o">==</span>  <span class="s2">&quot;Alex&#39; Profile&quot;</span>
</code></pre>
</div><p>(Cross-posted to the <a href="http://conceivian.com/insights">Conceivian Blog</a>)</p>
        </div>
        
          <p class="meta">
            Tags: ruby
          </p>
        
        <div id="disqus_thread"></div>
      </div>

    </div>
  </div>
  <div id="subcol">
    <div class="bt"><div></div></div>
    <div id="sc2">
      <div class="sidebar-node">
  <h3>Related</h3>
    <ul class="counts">
      
        
      
        
          <li><a href="/2009/07/i-hate-shoulda-but-i-blame-test-unit.html">I Hate Shoulda (But I Blame Test::Unit)</a></li>
        
      
        
          <li><a href="/2006/09/linking-outside-of-the-box-optimizing-ruby-with-c-c.html">Linking Outside of the Box: Optimizing Ruby with C/C++</a></li>
        
      
        
          <li><a href="/2006/06/grooming-my-inner-codemonkey.html">Grooming My Inner CodeMonkey</a></li>
        
      
        
          <li><a href="/2011/04/toward-a-more-perfect-mongo-odm.html">Toward a More Perfect Mongo ODM</a></li>
        
      
        
          <li><a href="/2010/10/take-my-money-please.html">Take my money, please!</a></li>
        
      
        
          <li><a href="/2011/03/back-from-the-dead.html">Back from the Dead</a></li>
        
      
        
          <li><a href="/2009/09/string-conversions-in-ruby.html">String Conversions in Ruby</a></li>
        
      
        
          <li><a href="/2006/07/a-few-of-my-favorite-things.html">A Few of My Favorite Things</a></li>
        
      
        
          <li><a href="/2010/02/swing-from-tree-to-tree.html">Swinging from Tree to Tree</a></li>
        
      
        
          <li><a href="/2006/09/building-ruby-extensions-with-rake.html">Building Ruby Extensions with Rake</a></li>
        
      
    </ul>
</div>

    </div>
  </div>
</div>

<script type="text/javascript">
  var disqus_shortname = 'finagle';
  var disqus_identifier = '';
  var disqus_url = 'http://finagle.org/2010/05/ruby-gets-possessive.html';

  (function() {
      var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
      dsq.src = 'http://' + disqus_shortname + '.disqus.com/embed.js';
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
  })();
</script>
<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>

        <div id="footer">
          <p>
            <a href="http://validator.w3.org/check/referer" title="Validates this page">XHTML</a>,
            <a href="http://jigsaw.w3.org/css-validator/check/referer?warning=no&amp;profile=css2" title="Validates the CSS on this page.">CSS</a>.
            Template by <a href="http://www.soniciq.com" title="SonicIQ - Website Development">SonicIQ</a>.
            Blog comments powered by <a href="http://disqus.com" class="dsq-brlink">Disqus</a>.
          </p>
        </div>
      </div>
    </div>
  </div>

  <script type="text/javascript">

  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-22936286-1']);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();

</script>
</body>
</html>
